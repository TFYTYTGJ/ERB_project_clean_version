<!DOCTYPE html>
<html>
  <head>
    <title><%= title %> - 註冊</title>
    <link rel='stylesheet' href='/stylesheets/style.css' /> 
    <link rel='stylesheet' href='/stylesheets/userView.css' />
  </head>
  <body>
    <%- include('video') %>
    <%- include('audio') %>
    <div class="content">
      <h1><%= title %></h1>
      <%- include('header',{user:user}) %>
      <h2 id="loginText"></h2>
      <hr>
      <form id="form" action="" method="post">

        <p><label for="email"><b>電郵地址</b></label></p>
        <input type="email" placeholder="輸入電郵" name="email" required>

        <p><label for="email"><b>用戶名稱</b></label></p>
        <input type="text" placeholder="輸入用戶名稱" name="username" required>

        <p><label for="psw"><b>密碼（必須等於或長於8位字元）</b></label></p>
        <input type="password" placeholder="輸入密碼" name="password" required>

        <p><label for="psw-repeat"><b>重覆輸入密碼</b></label></p>
        <input type="password" placeholder="輸入密碼" name="password_repeat"  class="registerbtn" required>
        <hr>

        <button type="submit" class="registerbtn">註冊</button>

      </form> 
      <p>已經有帳戶?請<a href="" id="loginAction">登入</a></p>
      
      <% if (messages) { %>
        <section class="messages">
          <% messages.forEach(function(message) { %>
            <p><b><%= message %></b></p>
          <% }); %>
        </section>
      <% } %>
    </div>
    <script>
      const searchParams = new URLSearchParams(window.location.search);
      if(searchParams.get('type')=="student"){
        document.getElementById('loginText').textContent = "學生註冊";
        document.getElementById('form').setAttribute("action", "/register?type=student");
        document.getElementById('loginAction').setAttribute('href', "/login?type=student");
      }
      else {
        document.getElementById('loginText').textContent = "老師註冊";
        document.getElementById('form').setAttribute("action", "/register?type=teacher");
        document.getElementById('loginAction').setAttribute('href', "/login?type=teacher");
      }
    </script>
  </body>
</html>