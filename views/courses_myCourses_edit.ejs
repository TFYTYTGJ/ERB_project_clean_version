<!DOCTYPE html>
<html>
    <head>
        <title>學習網站 - 查看所有課程</title>
        <link rel='stylesheet' href='/stylesheets/style.css' />
        <link rel='stylesheet' href='/stylesheets/userView.css' />
    </head>
    <body>
        <h1>學習網站</h1>
        <div id="student" style="display:none">你好，<%= user.username %>。 <a href="/courses">瀏覽所有課程</a> <a href="/courses/paid">瀏覽已付費課程</a> <a href="/users">個人資料</a> <a href="/moneyTickets/insert">輸入現金卷</a> <a href="/logout">登出</a></div>
        <div id="teacher" style="display:none">你好，<%= user.username %>。 <a href="/courses/myCourses">管理課程</a> <a href="/users">個人資料</a> <a href="/logout">登出</a></div>
        <div id="admin" style="display:none">你好，<%= user.username %>。 <a href="/moneyTickets">查看現金卷</a> <a href="/moneyTickets/new">輸入現金卷</a> <a href="/logout">登出</a></div>

        <p style="display:none" id="checkLogin" type="<%= user.type %>"></p>

        <form action="/courses/myCourses/<%= courseId %>" method="post" id="courseform">
            <div class="container">
                <h1 id="registerText">課程資料</h1>
                <hr>
                
                <label for="name"><b>課程名稱</b></label>
                <input type="text" placeholder="請輸入名稱" name="name" id="name" value="<%= course.name %>" required>
                
                <br><label for="name"><b>簡介</b></label><br>
                <textarea rows = "5" cols = "60" name = "introduction" form="courseform" required><%= course.introduction %></textarea> <br/>

                <br><label for="name"><b>內容</b></label><br>
                <textarea rows = "5" cols = "60" name = "content" form="courseform" required><%= course.content %></textarea> <br/>

                <br><label for="name"><b>學習的人能夠得到甚麼</b></label><br>
                <textarea rows = "5" cols = "60" name = "whatPeopleLearn" form="courseform" required><%= course.whatPeopleLearn %></textarea> <br/>

                <label for="name"><b>圖片連結</b></label>
                <input type="text" placeholder="請輸入連結" name="photoLink" id="photoLink" value="<%= course.photoLink %>" required>

                <label for="name"><b>影片連結</b></label>
                <input type="text" placeholder="請輸入連結" name="videoLink" id="videoLink" value="<%= course.videoLink %>" required>

                <label for="name"><b>課程價錢</b></label>
                <input type="text" placeholder="輸入價錢" name="money" id="money" value="<%= course.money %>" required>
            
                <label for="name"><b>課程分類</b></label>
                <input type="text" placeholder="輸入分類" name="category" id="category" value="<%= course.category %>" required>
                
                <hr>
                
                <button type="submit" class="registerbtn">更改資料</button>
            </div>
            
            <label for="uname" style="display:none" id="errorFalseText"><b>更改資料成功</b></label>
            <label for="uname" style="display:none" id="errorTrueText"><b>更改資料失敗。請重新嘗試</b></label>
            <p><a href="/courses/myCourses">回到上一頁</a></p>
        </form> 
    </body>
    </html>
    <script>
        const searchParams = new URLSearchParams(window.location.search);

        if(searchParams.get('error') == "true"){
            document.getElementById('errorTrueText').style.display = "initial";
        }
        else if(searchParams.get('error') == "false"){
            document.getElementById('errorFalseText').style.display = "initial";
        }

        let checkLogin = document.getElementById('checkLogin');
        if(checkLogin.getAttribute("type")=="student"){
            document.getElementById('student').style.display = "initial";
        } else if (checkLogin.getAttribute("type")=="teacher") {
            document.getElementById('teacher').style.display = "initial";
        }

        if(checkLogin.getAttribute("paid") == "true"){
            document.getElementById('paid').style.display = "initial";
        } else {
            document.getElementById('notpaid').style.display = "initial";
        }

    </script>